#!/bin/bash

#  192.168.5.216 - - [27/Jun/2014:14:33:36 +0400] "POST /operator/id10/ping HTTP/1.1" 200 363
#  192.168.5.4 - - [27/Jun/2014:14:33:37 +0400] "POST /operator/id8/ping HTTP/1.1" 200 356
#  192.168.5.208 - - [27/Jun/2014:14:33:48 +0400] "POST /operator/id19/ping HTTP/1.1" 200 372
#  192.168.0.60 - - [27/Jun/2014:14:33:48 +0400] "POST /monitor HTTP/1.1" 200 139
#  192.168.13.102 - - [27/Jun/2014:14:33:48 +0400] "POST /operator/id17/ping HTTP/1.1" 200 359
#  192.168.5.216 - - [27/Jun/2014:14:33:48 +0400] "POST /operator/id10/ping HTTP/1.1" 200 363
#  192.168.5.4 - - [27/Jun/2014:14:33:49 +0400] "POST /operator/id8/ping HTTP/1.1" 200 356
#  192.168.5.207 - - [27/Jun/2014:14:33:52 +0400] "POST /monitor HTTP/1.1" 200 139
#  192.168.0.60 - - [27/Jun/2014:14:33:52 +0400] "POST /monitor HTTP/1.1" 200 139
#  192.168.13.102 - - [27/Jun/2014:14:33:52 +0400] "POST /operator/id17/ping HTTP/1.1" 200 359
#  192.168.5.216 - - [27/Jun/2014:14:33:52 +0400] "POST /operator/id10/ping HTTP/1.1" 200 363
#  192.168.0.67 - - [27/Jun/2014:14:33:53 +0400] "GET /registration?tid=t2&queue=P HTTP/1.1" 200 2468
#  192.168.5.4 - - [27/Jun/2014:14:33:53 +0400] "POST /operator/id8/ping HTTP/1.1" 200 356


# sed 's/'

# sed -e 's/\t[\t]*/\t/g' inputFile

# grep -o '\"[A-Z0-9\-]*\"' < inputFile

# sed 's/^\d{1,4}//g'`;


# blue  - \033[01;96m
# grey  - 01;90m
# green - 02;92m
# red   - 01;91m

c_ip="01;96m"
c_date="01;90m"


# tail $* | \
    # sed 's/[ERROR]/[00;31m[ERROR]/g; s/WARNING/[00;33mWARNING/g; s/INFO/[01;35mINFO/g; s/$/[00;00m/'


# tail /var/log/apache2/access.log |
    # sed 's/^/[01;96m/; s/ /[00;00m /'
    # sed 's/^[0-9.]\{7,15\}/M/'

tail -f /var/log/apache2/access.log | sed \
    -e 's/^\([0-9.]\{7,15\}\) - - \(\[[a-Z0-9: \+\/]*\]\)/[00m[01;96m\1[00;m - [01;90m\2[00m -/g;' \
    -e 's/"\([^"]*\)" \([0-9]\{3\}\) [0-9]*$/(\2) \1/g' \
    -e 's/(\(2[0-9]\{2\}\))/[00m[01;90m([00m[01;92m\1[00m[01;90m)[00m/g' \
    -e 's/(\(3[0-9]\{2\}\))/[00m[01;90m([00m[01;96m\1[00m[01;90m)[00m/g' \
    -e 's/(\(4[0-9]\{2\}\))/[00m[01;90m([00m[01;91m\1[00m[01;90m)[00m/g' \
    -e 's/(\(5[0-9]\{2\}\))/[00m[01;90m([00m[37;41m\1[00m[01;90m)[00m/g'

# 's/"//g; s/^\([0-9.]\{7,15\}\)/[00m[01;96m\1[00m/g; s/\(\[[a-Z0-9: \+\/]*\]\)/[00m[01;90m\1[00m/g;  s/\([A-Z]*\) \([^ ]*\) \([^ ]*\)/METHOD URL HTTP/g'
# 's/^\([0-9.]\{7,15\}\) - - \(\[[a-Z0-9: \+\/]*\]\)'


# | \
    # sed 's/^\([0-9.]\{7,15\}\)/[00m[01;96m\1[00m/g'
        # -e 's/\(\[[a-Z0-9: \+\/]*\]\)/[00m[01;90m\1[00m/' \
        # -e 's/"\([A-Z]*\) \([^ ]*\) \([^ ]*\)"/"METHOD URL HTTP"/'

    # awk '{print \
    #      "\033[01;96m" $1 "\033[01;90m \t- " \
    #      $4 " " $5 \
    #      " - (" $9 ") " \
    #      "\033[00m" $6 "\t" $7 }'
          # | \
    # sed -e 's/(\(2[0-9]\{2\}\))/[00m[01;90m([00m[01;92m\1[00m[01;90m)[00m/' \
    #     -e 's/(\(3[0-9]\{2\}\))/[00m[01;90m([00m[01;96m\1[00m[01;90m)[00m/' \
    #     -e 's/(\(4[0-9]\{2\}\))/[00m[01;90m([00m[01;91m\1[00m[01;90m)[00m/' \
    #     -e 's/(\(5[0-9]\{2\}\))/[00m[01;90m([00m[37;41m\1[00m[01;90m)[00m/'




# IP
# sed 's/^[0-9.]\{7,15\}/M/'

# DATA
# sed 's/\[[a-Z0-9: \+\/]*\]/DATA/'


# sed 's/"\([A-Z]*\) \([^ ]*\) \([^ ]*\)"/"METHOD URL HTTP"/'


# RESULT:
# 192.168.5.216   - [27/Jun/2014:14:33:52 +0400] - (200) POST     /operator/id10/ping
# 192.168.0.67    - [27/Jun/2014:14:33:53 +0400] - (200) GET      /registration?tid=t2&queue=P

# tail -f /var/log/apache2/access.log | sed 's/"//g'  | \
# sed 's/^\([0-9.]\{7,15\}\)/[00m[01;90m\1[00m/' | \
# sed 's/\[[a-Z0-9: \+\/]*\]/DATA/'


#     awk '{print \
#          "\033[01;96m" $1 "\033[01;90m \t- " \
#          $4 " " $5 \
#          " - (" $9 ") " \
#          "\033[00m" $6 "\t" $7 }'
          # | \
    # sed -e 's/(\(2[0-9]\{2\}\))/[00m[01;90m([00m[01;92m\1[00m[01;90m)[00m/' \
    #     -e 's/(\(3[0-9]\{2\}\))/[00m[01;90m([00m[01;96m\1[00m[01;90m)[00m/' \
    #     -e 's/(\(4[0-9]\{2\}\))/[00m[01;90m([00m[01;91m\1[00m[01;90m)[00m/' \
    #     -e 's/(\(5[0-9]\{2\}\))/[00m[01;90m([00m[37;41m\1[00m[01;90m)[00m/'